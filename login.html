<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login â€“ WhatsUpNova</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .login-container { max-width: 460px; margin: 3rem auto; }
    .card { padding: 3rem 2.5rem; text-align:center; }
    .role-tabs { display:flex; margin-bottom:2rem; border-radius:12px; overflow:hide; background:#151921; }
    .tab { flex:1; padding:1rem; cursor:pointer; transition:all .3s; font-weight:600; }
    .tab.active { background:var(--green); color:#000; }
    .tab:not(.active):hover { background:#2a2f3b; }
    .hide { display:none; }
    .error-msg { color:var(--error); margin-top:1rem; font-weight:600; display:none; }

    /* Password Toggle Eye Icon */
    .password-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }
    .password-wrapper input {
      padding-right: 50px;
    }
    .toggle-password {
      position: absolute;
      right: 14px;
      cursor: pointer;
      color: var(--muted);
      font-size: 1.2rem;
      user-select: none;
      transition: color .3s;
    }
    .toggle-password:hover { color: var(--green); }
  </style>
</head>
<body>

<div class="login-container">
  <div class="card">

    <div class="logo-icon" style="width:90px;height:90px;font-size:3.5rem;margin:0 auto 1rem;">WN</div>
    <h1 class="page-title" style="font-size:2.4rem;">Welcome Back</h1>
    <p style="color:var(--muted);margin-bottom:2rem;">Choose your role to continue</p>

    <!-- Role Tabs -->
    <div class="role-tabs">
      <div class="tab active" data-role="club">Club Login</div>
      <div class="tab" data-role="admin">Admin / Office</div>
    </div>

    <!-- Club Login Form -->
    <form id="clubForm" class="login-form">
      <div class="form-group">
        <label>Club Email</label>
        <input type="email" id="clubEmail" class="form-input" placeholder="your.club@email.vccs.edu" required>
      </div>
      <div class="form-group">
        <label>Password</label>
        <div class="password-wrapper">
          <input type="password" id="clubPass" class="form-input" required>
          <span class="toggle-password" onclick="togglePass('clubPass', this)">Show</span>
        </div>
      </div>
      <p class="error-msg" id="clubError">Incorrect email or password</p>
      <button type="submit" class="btn-primary" style="margin-top:1.5rem;">Login as Club</button>
      <p style="margin-top:1.5rem;color:var(--muted);">
        Don't have an account? <a href="register.html" style="color:var(--green);">Register your club</a>
      </p>
    </form>

    <!-- Admin Login Form -->
    <form id="adminForm" class="login-form hidden">
      <div class="form-group">
        <label>Admin Username</label>
        <input type="text" id="adminUser" class="form-input" placeholder="Office staff only" required>
      </div>
      <div class="form-group">
        <label>Admin Password</label>
        <div class="password-wrapper">
          <input type="password" id="adminPass" class="form-input" required>
          <span class="toggle-password" onclick="togglePass('adminPass', this)">Show</span>
        </div>
      </div>
      <p class="error-msg" id="adminError">Incorrect admin credentials</p>
      <button type="submit" class="btn-primary" style="margin-top:1.5rem;">Login as Admin</button>
    </form>

    <div style="margin-top:2.5rem;">
      <a href="index.html" class="back-btn">Back to Events</a>
    </div>
  </div>
</div>

<script>
  // Tab switching
  document.querySelectorAll(".tab").forEach(tab => {
    tab.addEventListener("click", () => {
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      tab.classList.add("active");

      const role = tab.dataset.role;
      document.getElementById("clubForm").classList.toggle("hide", role !== "club");
      document.getElementById("adminForm").classList.toggle("hide", role !== "admin");

      // Hide errors when switching
      document.getElementById("clubError").style.display = "none";
      document.getElementById("adminError").style.display = "none";
    });
  });

  // Toggle password visibility
  function togglePass(inputId, eyeIcon) {
    const input = document.getElementById(inputId);
    if (input.type === "password") {
      input.type = "text";
      eyeIcon.textContent = "Hide";
    } else {
      input.type = "password";
      eyeIcon.textContent = "Show";
    }
  }

  // Club login (demo)
  document.getElementById("clubForm").addEventListener("submit", e => {
    e.preventDefault();
    const email = document.getElementById("clubEmail").value.trim().toLowerCase();
    
    if (email.endsWith("@email.vccs.edu")) {
      localStorage.setItem("clubLoggedIn", "true");
      localStorage.setItem("clubEmail", email);
      window.location.href = "add-event.html";
    } else {
      document.getElementById("clubError").style.display = "block";
    }
  });

  // Admin login
  const ADMIN_USER = "novaadmin";
  const ADMIN_PASS = "WhatsUp2025!";

  document.getElementById("adminForm").addEventListener("submit", e => {
    e.preventDefault();
    const user = document.getElementById("adminUser").value.trim();
    const pass = document.getElementById("adminPass").value;

    if (user === ADMIN_USER && pass === ADMIN_PASS) {
      localStorage.setItem("adminLoggedIn", "true");
      window.location.href = "admin-dashboard.html";
    } else {
      document.getElementById("adminError").style.display = "block";
    }
  });
</script>
</body>
</html>